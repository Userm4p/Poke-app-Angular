<div class="pokedex-container">
  <div class="header">
    <h1>{{ title }}</h1>
    <p>Browse all available Pok√©mon</p>
  </div>

  <div class="content">
    <div class="search-section">
      <input
        type="text"
        placeholder="Search Pok√©mon..."
        class="search-input"
        [(ngModel)]="searchQuery"
        (keyup.enter)="searchPokemon()"
      />
      <button class="search-btn" (click)="searchPokemon()">üîç</button>
    </div>

    @if (totalPokemon > 0) {
      <div class="stats-section">
        <p>Displaying {{ filteredPokemon.length }} out of {{ totalPokemon }} Pok√©mon</p>
      </div>
    }
    @if (filteredPokemon.length > 0) {
      <div class="pokemon-grid">
        @for (pokemon of filteredPokemon; track pokemon.id) {
          <div class="pokemon-card" (click)="viewPokemonDetails(pokemon)">
            <div class="pokemon-image">
              <img
                [src]="pokemon.sprites.front_default"
                [alt]="pokemon.name"
                (error)="
                  $event.target.src = 'https://via.placeholder.com/150x150/68A090/FFFFFF?text=?'
                "
              />
            </div>

            <div class="pokemon-info">
              <h3>{{ formatPokemonName(pokemon.name) }}</h3>
              <p class="pokemon-id">#{{ pokemon.id.toString().padStart(3, '0') }}</p>

              <div class="pokemon-types">
                @for (type of pokemon.types; track type.type.name) {
                  <span class="type-badge" [style.background-color]="getTypeColor(type.type.name)">
                    {{ formatPokemonName(type.type.name) }}
                  </span>
                }
              </div>

              <div class="pokemon-stats">
                @for (stat of pokemon.stats; track stat.stat.name) {
                  <div class="stat-bar">
                    <span class="stat-name">{{ getStatName(stat.stat.name) }}:</span>
                    <div class="stat-progress">
                      <div
                        class="stat-fill"
                        [style.width.%]="(stat.base_stat / 255) * 100"
                        [style.background-color]="getTypeColor(pokemon.types[0].type.name)"
                      ></div>
                      <span class="stat-value">{{ stat.base_stat }}</span>
                    </div>
                  </div>
                }
              </div>

              <div class="pokemon-details">
                <div class="detail-item">
                  <span class="detail-label">Height:</span>
                  <span class="detail-value">{{ pokemon.height / 10 }}m</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Weight:</span>
                  <span class="detail-value">{{ pokemon.weight / 10 }}kg</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Base Exp:</span>
                  <span class="detail-value">{{ pokemon.base_experience }}</span>
                </div>
              </div>
            </div>
          </div>
        } @empty {
          <div class="no-results">
            <p>No Pok√©mon to display üò¢</p>
          </div>
        }
      </div>
    }
    @if (!isLoading && filteredPokemon.length === 0) {
      <div class="no-results">
        <p>No Pok√©mon matching your search were found.</p>
      </div>
    }

    @if (!isLoading && searchQuery === '' && pokemonList.length < totalPokemon) {
      <div class="load-more-section">
        <button class="load-more-btn" (click)="loadMorePokemon()">Load more Pok√©mon</button>
      </div>
    }

    @if (isLoading) {
      <div class="loading-indicator">
        <div class="spinner"></div>
        <p>Loading Pok√©mon...</p>
      </div>
    }
  </div>
</div>
